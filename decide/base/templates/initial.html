{% extends "base.html" %}

{% load i18n static %}

{% load static %}

{% block content %}

<div class="navigator">
    <div class="info">
        
        <p>
            {% trans 'Elige la opcion deseada en la casilla correspondiente y clickea para acceder' %}
        </p>
    </div>

    <div class="row">
        <label for="admin" class="label">{% trans 'Administrador' %}</label>
        <button class="button" onclick="go_to_route('/admin/')">{% trans 'Acceder' %}</button>
    </div>

    <div class="row">
        <label for="register" class="label">{% trans 'Registro' %}</label>
        <button class="button" onclick="go_to_route('/users/register/')">{% trans 'Acceder' %}</button>
    </div>

    {% if user.is_authenticated and not user.is_superuser %}
        <div class="row">
            <label for="edit-profile" class="label">{% trans 'Editar perfil' %}</label>
            <button class="button" onclick="go_to_route('/users/edit-profile/')">{% trans 'Acceder' %}</button>
        </div>
    {% endif %}

    <div class="row">
        {% if user.is_authenticated %}
        <label for="logout" class="label">{% trans 'Cerrar sesión' %}</label>
        <a  class="button" href="/users/logout/">
            {% trans 'Cerrar sesión' %}
        </a>
        {% else %}
        <label for="login" class="label">{% trans 'Iniciar sesión' %}</label>
        <a  class="button" href="/users/login/">
            {% trans 'Iniciar sesión' %}
        </a>
        {%endif%}
        
    </div>

    <div class="row">
        <label for="mailer" class="label">{% trans 'Enviar email' %}</label>
        <button class="button" onclick="go_to_route('/mailer/')">{% trans 'Acceder' %}</button>
    </div>

    <div class="row">
        <label for="voting" class="label">{% trans 'Cabina' %}</label>
        <button class="button" onclick=" button_go_to_route('booth/listActiveVoting/')">{% trans 'Lista' %}</button>
    </div>

    <div class="row">
        <label for="voting" class="label">{% trans 'Resultados'%}</label>
        <button class="button" onclick=" button_go_to_route('visualizer/listVisualizer/')">{% trans 'Lista' %}</button>
    </div>
    {% if user.is_authenticated %}
        <div class="row">
            <label for="notice" class="label">{% trans 'Aviso' %}</label>
            <a class="button" href="/users/notice">
                {% trans 'Acceso' %}
            </a>
        </div>
    {%endif%}

    {% if user.is_superuser %}
        <div class="row">
            <label for="census" class="label">{% trans 'census' %}</label>
            <button class="button" onclick=" button_go_to_route('admin/voting/voting/upload-csv/')">{% trans 'Importar' %}</button>
        </div>
    {% endif %}

    <div class="row">
        <label for="ticket" class="label">Ticket</label>
        <button class="button" onclick=" button_go_to_route('ticket/add-ticket/')">{% trans 'Crear' %}</button>
    </div>
    
    
    
    
</div>
<div class="urls-list">

    <label class="poster">{% trans 'Para aquellos que necesitan o prefieren utilizar la navegación basada en URL, aquí les brindamos los diferentes puntos de acceso:' %}</label>
   <ul>

       {% for url in url_patterns %}
       
           {% if url != ""%}
            <li><label class="label">{{ url }}</label></li>
            {% endif %}
       {% endfor %}

   </ul>

   <script>
    // Agrega un evento click al botón
    function go_to_route(url, id){
        // La función que se ejecutará al hacer clic en el botón

        if (url != '/admin/' && url != '/users/register/' && url != '/mailer/' && url != '/users/edit-profile/') {
            let inputValue = document.getElementById(id).value;
            if(inputValue == null || inputValue == ""){
                alert("Por favor, introduzca un valor válido");
            } else {
                window.location.href = url + inputValue;
            }
        } else {
            console.log(url);
            window.location.href = url;
            
        }
    }

    function button_go_to_route(url) {
        window.location.href = url;
    }
</script>

</div>
{% endblock content %}

